<!DOCTYPE html>












  


<html class="theme-next gemini use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">




  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2">



  
  
  <link rel="stylesheet" href="/lib/Han/dist/han.min.css?v=3.3">



  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">











  
  
  <link rel="stylesheet" href="/lib/fancybox/source/jquery.fancybox.css">







<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.1.1">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.1.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/cat_32px_1165145_easyicon.net.ico?v=7.1.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/cat_16px_1165145_easyicon.net.ico?v=7.1.1">


  <link rel="mask-icon" href="/images/logo.svg?v=7.1.1" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.1.1',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: true,
    fastclick: true,
    lazyload: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '5HERDWLKZV',
      apiKey: '7876dff207d78e6df0721656b26ee0af',
      indexName: 'hexo-algolia',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="Git 原理和常用命令5 Git workflows you can use to deliver better code and improve your development processI haven’t met a developer who looked at a conflict message and did not pull their hair strands with fr">
<meta name="keywords" content="Git">
<meta property="og:type" content="article">
<meta property="og:title" content="Git note">
<meta property="og:url" content="http://miaopei.github.io/2020/08/29/Git/GitNote/index.html">
<meta property="og:site_name" content="Mr.Miaow Blog">
<meta property="og:description" content="Git 原理和常用命令5 Git workflows you can use to deliver better code and improve your development processI haven’t met a developer who looked at a conflict message and did not pull their hair strands with fr">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/Basic-git-workflow-3.png">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/Feature-Branch-git-workflow-4.png">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/feature-branch-with-develop-git-workflow-2.png">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/GitFlow-git-workflow-2.png">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/CheckinsOverTime.png">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/flow.png">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/HEAD.png">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/GitAdd.png">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/GitCommit.png">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/GitBranch.png">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/GitMerge.png">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/GitRebase.png">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/GitResetHEAD.png">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/GitRset.png">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/GitRevert.png">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/MergeRebase-1.png">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/MergeRebase-2.png">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/MergeRebase-3.png">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95.png">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95-1.png">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/%E7%BA%A6%E5%AE%9A.png">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/Diff.png">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/Commit.png">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/Commit-1.png">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/Commit-2.png">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/Checkout.png">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/Checkout-1.png">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/Checkout-2.png">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/Commit-3.png">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/Checkout-3.png">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/Checkout-4.png">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/Reset.png">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/Reset-1.png">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/Reset-2.png">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/Merge.png">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/Merge-1.png">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/CherryPick.png">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/Rebase.png">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/Rebase-1.png">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/GitGraph-0.gif">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/GitGraph-1.gif">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/GitGraph-2.gif">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/GitGraph-3.gif">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/GitGraph-4.gif">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/GitGraph-5.gif">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/GitGraph-6.gif">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/GitGraph-7.gif">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/GitGraph-8.gif">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/GitGraph-9.gif">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/GitGraph-10.gif">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/GitGraph-11.gif">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/GitGraph-12.gif">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/GitGraph-13.png">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/GitGraph-14.png">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/GitGraph-15.gif">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/GitGraph-16.gif">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/GitGraph-17.gif">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/GitGraph-18.gif">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/GitGraph-19.gif">
<meta property="og:image" content="http://miaopei.github.io/images/images_git/GitFrame.png">
<meta property="og:updated_time" content="2020-09-23T07:29:44.858Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Git note">
<meta name="twitter:description" content="Git 原理和常用命令5 Git workflows you can use to deliver better code and improve your development processI haven’t met a developer who looked at a conflict message and did not pull their hair strands with fr">
<meta name="twitter:image" content="http://miaopei.github.io/images/images_git/Basic-git-workflow-3.png">



  <link rel="alternate" href="/atom.xml" title="Mr.Miaow Blog" type="application/atom+xml">



  
  
  <link rel="canonical" href="http://miaopei.github.io/2020/08/29/Git/GitNote/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Git note | Mr.Miaow Blog</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript><!-- hexo-inject:begin --><!-- hexo-inject:end -->

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Mr.Miaow Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <h1 class="site-subtitle" itemprop="description">Do what you say, say what you do.</h1>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-messages">

    
    
    
      
    

    

    <a href="/messages/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>留言板</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-top">

    
    
    
      
    

    

    <a href="/top/" rel="section"><i class="menu-item-icon fa fa-fw fa-signal"></i> <br>阅读Top</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
        </li>
      
    </ul>
  

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  
    <div class="reading-progress-bar"></div>
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://miaopei.github.io/2020/08/29/Git/GitNote/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mr.Miaow">
      <meta itemprop="description" content>
      <meta itemprop="image" content="http://wx4.sinaimg.cn/orj360/e9d04169ly1fde7jy4bquj20ek0hf7gh.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mr.Miaow Blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">Git note

              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2020-08-29 18:02:52" itemprop="dateCreated datePublished" datetime="2020-08-29T18:02:52+08:00">2020-08-29</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Git/" itemprop="url" rel="index"><span itemprop="name">Git</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          
            <span id="/2020/08/29/Git/GitNote/" class="leancloud_visitors" data-flag-title="Git note">
            <span class="post-meta-divider">|</span>
            <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
            </span>
            
                <span class="post-meta-item-text">阅读次数：</span>
                <!--<span class="post-meta-item-text">阅读次数：</span>-->
            
            <span class="leancloud-visitors-count"></span>
            </span>
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">11.2k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">44</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        <h1 id="Git-原理和常用命令"><a href="#Git-原理和常用命令" class="headerlink" title="Git 原理和常用命令"></a>Git 原理和常用命令</h1><h2 id="5-Git-workflows-you-can-use-to-deliver-better-code-and-improve-your-development-process"><a href="#5-Git-workflows-you-can-use-to-deliver-better-code-and-improve-your-development-process" class="headerlink" title="5 Git workflows you can use to deliver better code and improve your development process"></a>5 Git workflows you can use to deliver better code and improve your development process</h2><p>I haven’t met a developer who looked at a conflict message and did not pull their hair strands with frustration.</p>
<a id="more"></a>

<p>Trying to resolve each merge conflict is one of those things that every developer hates. Especially if it hits you when you’re gearing up for a production deploy!</p>
<p>This is where having the right Git workflow set up can do a world of good for your <span class="exturl" data-url="aHR0cHM6Ly96ZXBlbC5pby9ibG9nL3NpbXBsZS1zb2Z0d2FyZS1kZXZlbG9wbWVudC13b3JrZmxvdy8/dXRtX3NvdXJjZT16ZXBlbGJsb2cmdXRtX21lZGl1bT10ZXh0JnV0bV9jYW1wYWlnbj1naXQtd29ya2Zsb3c=" title="https://zepel.io/blog/simple-software-development-workflow/?utm_source=zepelblog&utm_medium=text&utm_campaign=git-workflow">development workflow<i class="fa fa-external-link"></i></span>.</p>
<p>Of course, having the right git workflow will not solve all your problems. But it’s a step in the right direction. After all, with every team working remotely, the need to build features together without having your codebase getting disrupted is critical.</p>
<p>How you set it up depends on the project you’re working on, the release schedules your team has, the size of the team, and more!</p>
<p>In this article, we’ll walk you through 5 different git workflows, their benefits, their cons, and when you should use them. Let’s jump in!</p>
<h3 id="1-Basic-Git-Workflow"><a href="#1-Basic-Git-Workflow" class="headerlink" title="1. Basic Git Workflow"></a>1. Basic Git Workflow</h3><p>The most basic git workflow is the one where there is only one branch — the master branch. Developers commit directly into it and use it to deploy to the staging and production environment.</p>
<p><img src="/images/images_git/Basic-git-workflow-3.png" alt="Basic Git Workflow with all commits getting added directly to master branch"></p>
<p>This workflow isn’t usually recommended unless you’re working on a side project and you’re looking to get started quickly.</p>
<p>Since there is only one branch, there really is no process over here. This makes it effortless to get started with Git. However, some cons you need to keep in mind when using this workflow are:</p>
<ol>
<li>Collaborating on code will lead to multiple conflicts.</li>
<li>Chances of shipping buggy software to production is higher.</li>
<li>Maintaining clean code is harder.</li>
</ol>
<h3 id="2-Git-Feature-Branch-Workflow"><a href="#2-Git-Feature-Branch-Workflow" class="headerlink" title="2. Git Feature Branch Workflow"></a>2. Git Feature Branch Workflow</h3><p>The Git Feature Branch workflow becomes a must have when you have more than one developer working on the same codebase.</p>
<p>Imagine you have one developer who is working on a new feature. And another developer working on a second feature. Now, if both the developers work from the same branch and add commits to them, it would make the codebase a huge mess with plenty of conflicts.</p>
<p><img src="/images/images_git/Feature-Branch-git-workflow-4.png" alt="Git workflow with feature branches"></p>
<p>To avoid this, the two developers can create two separate branches from the master branch and work on their features individually. When they’re done with their feature, they can then merge their respective branch to the master branch, and deploy without having to wait for the second feature to be completed.</p>
<p>The Pros of using this workflow is, the git feature branch workflow allows you to collaborate on code without having to worry about code conflicts.</p>
<h3 id="3-Git-Feature-Workflow-with-Develop-Branch"><a href="#3-Git-Feature-Workflow-with-Develop-Branch" class="headerlink" title="3. Git Feature Workflow with Develop Branch"></a>3. Git Feature Workflow with Develop Branch</h3><p>This workflow is one of the more popular workflows among developer teams. It’s similar to the Git Feature Branch workflow with a develop branch that is added in parallel to the master branch.</p>
<p>In this workflow, the master branch always reflects a production-ready state. Whenever the team wants to deploy to production they deploy it from the master branch.</p>
<p>The develop branch reflects the state with the latest delivered development changes for the next release. Developers create branches from the develop branch and work on new features. Once the feature is ready, it is tested, merged with develop branch, tested with the develop branch’s code in case there was a prior merge, and then merged with master.</p>
<p><img src="/images/images_git/feature-branch-with-develop-git-workflow-2.png" alt="Git workflow with feature and develop branches"></p>
<p>The advantage of this workflow is, it allows teams to consistently merge new features, test them in staging, and deploy to production. While maintaining code is easier, it can get a little tiresome for some teams since it can feel like going through a tedious process.</p>
<h3 id="4-Gitflow-Workflow"><a href="#4-Gitflow-Workflow" class="headerlink" title="4. Gitflow Workflow"></a>4. Gitflow Workflow</h3><p>The gitflow workflow is very similar to the previous workflow we discussed combined with two other branches — the release branch and the hot-fix branch.</p>
<p><strong>The hot-fix branch</strong></p>
<p>The hot-fix branch is the only branch that is created from the master branch and directly merged to the master branch instead of the develop branch. It is used only when you have to quickly patch a production issue. An advantage of this branch is, it allows you to quickly deploy a production issue without disrupting others’ workflow or without having to wait for the next release cycle.</p>
<p>Once the fix is merged into the master branch and deployed, it should be merged into both develop and the current release branch. This is done to ensure that anyone who forks off develop to create a new feature branch has the latest code.</p>
<p><strong>The release branch</strong></p>
<p>The release branch is forked off of develop branch after the develop branch has all the features planned for the release merged into it successfully.</p>
<p>No code related to new features is added into the release branch. Only code that relates the release is added to the release branch. For example, documentation, bug fixes, and other tasks related to this release are added to this branch.</p>
<p>Once this branch is merged with master and deployed to production, it’s also merged back into the develop branch, so that when a new feature is forked off of develop, it has the latest code.</p>
<p><img src="/images/images_git/GitFlow-git-workflow-2.png" alt="Gitflow workflow with hotfix and release branches"></p>
<p>This workflow was first published and made popular by <span class="exturl" data-url="aHR0cDovL252aWUuY29tL3Bvc3RzL2Etc3VjY2Vzc2Z1bC1naXQtYnJhbmNoaW5nLW1vZGVsLw==" title="http://nvie.com/posts/a-successful-git-branching-model/">Vincent Driessen<i class="fa fa-external-link"></i></span> and since then it has been widely used by organizations that have a scheduled release cycle.</p>
<p>Since the git-flow is a wrapper around Git, you can install git-flow in your current repository. It’s a straightforward process and it doesn’t change anything in your repository other than creating branches for you.</p>
<p>To install on a Mac machine, execute <code>brew install git-flow</code> in your terminal.</p>
<p>To install on a Windows machine, you’ll need to <span class="exturl" data-url="aHR0cHM6Ly9naXQtc2NtLmNvbS9kb3dubG9hZC93aW4=" title="https://git-scm.com/download/win">download and install the git-flow<i class="fa fa-external-link"></i></span>. After the installation is done, run <code>git flow init</code> to use it in your project.</p>
<h3 id="5-Git-Fork-Workflow"><a href="#5-Git-Fork-Workflow" class="headerlink" title="5. Git Fork Workflow"></a>5. Git Fork Workflow</h3><p>The Fork workflow is popular among teams who use open-source software.</p>
<p>The flow usually looks like this:</p>
<ol>
<li>The developer forks the open-source software’s official repository. A copy of this repository is created in their account.</li>
<li>The developer then clones the repository from their account to their local system.</li>
<li>A remote path for the official repository is added to the repository that is cloned to the local system.</li>
<li>The developer creates a new feature branch is created in their local system, makes changes, and commits them.</li>
<li>These changes along with the branch are pushed to the developer’s copy of the repository on their account.</li>
<li>A pull request from the branch is opened to the official repository.</li>
<li>The official repository’s manager checks the changes and approves the changes to get merged into the official repository.</li>
</ol>
<h2 id="Git-基础和原理"><a href="#Git-基础和原理" class="headerlink" title="Git 基础和原理"></a>Git 基础和原理</h2><h3 id="直接记录快照，而非差异比较"><a href="#直接记录快照，而非差异比较" class="headerlink" title="直接记录快照，而非差异比较"></a>直接记录快照，而非差异比较</h3><p>Git和其他版本控制系统（包括SVN和近似工具）的主要差别在于Git对待数据的方法。概念上来区分，其他大部分系统以文件变更列表的方式存储信息。这类系统（CVS、Subversion、Perforce、Bazaar等等）将它们保存的信息看作是一组基本文件和每个文件随时间逐步累积的差异。Git不按照以上方式对待或保存数据。反之，Git更像是把数据看作是对小型文件系统的一组快照。每次你提交更新，或在Git中保存项目状态时，它主要对当时的全部文件制作一个快照并保存这个快照的索引。为了高效，如果文件没有修改，Git不再重新存储该文件，而是只保留一个链接指向之前存储的文件。Git对待数据更像是一个快照流。如下图所示。这是Git与几乎所有其它版本控制系统的重要区别。</p>
<p><img src="/images/images_git/CheckinsOverTime.png" alt="快照流"></p>
<h3 id="近乎所有操作都是本地执行"><a href="#近乎所有操作都是本地执行" class="headerlink" title="近乎所有操作都是本地执行"></a>近乎所有操作都是本地执行</h3><p>在Git中的绝大多数操作只需要访问本地文件和资源，一般不需要来自网络上其它计算机的信息。如果你习惯于所有操作都有网络延时开销的集中式版本控制系统，Git在这方面会让你感到速度之神赐给了Git超凡的能量。因为你在本地磁盘上就有项目的完整历史，所以大部分操作看起来瞬间完成。</p>
<p>举个例子，要浏览项目的历史，Git不需要外连到服务器去获取历史，然后再显示出来，它只需要直接从本地数据库中读取。你能立即看到项目历史。如果想查看当前版本与一个月前的版本之间引入的修改，Git会查找到一个月前的文件做一次本地的差异计算，而不是由远程服务器处理或从远程服务器拉回旧版本文件再来本地处理。</p>
<h3 id="Git-保证完整性"><a href="#Git-保证完整性" class="headerlink" title="Git 保证完整性"></a>Git 保证完整性</h3><p>Git中所有数据在存储前都计算校验和，然后以校验和来引用。这意味着不可能在Git不知情时更改任何文件内容或目录内容。这个功能构建在Git底层，是构成Git哲学不可或缺的部分。若你在传送过程中丢失信息或损坏文件，Git就能发现。</p>
<h3 id="Git一般只添加数据"><a href="#Git一般只添加数据" class="headerlink" title="Git一般只添加数据"></a>Git一般只添加数据</h3><p>你执行的Git操作，几乎只往Git数据库中增加数据。很难让Git执行任何不可逆的操作，或者让它以任何形式清除数据。同别的VCS一样，未提交更新时有可能丢失或弄乱修改的内容，但是一旦你提交快照到Git中，就难以再丢失数据，特别是如果你定期的推送数据库到其它仓库的话。</p>
<h2 id="Git-的工作流程"><a href="#Git-的工作流程" class="headerlink" title="Git 的工作流程"></a>Git 的工作流程</h2><h3 id="先来了解4个专有名词"><a href="#先来了解4个专有名词" class="headerlink" title="先来了解4个专有名词"></a>先来了解4个专有名词</h3><ul>
<li><p><strong>Workspace</strong>（工作区）：</p>
<p>  我们平时进行开发改动的地方，是我们当前看到的，也是最新的。平常我们开发就是拷贝远程仓库中的一个分支，基于该分支进行开发，在开发过程中就是对工作区的操作。</p>
</li>
<li><p><strong>Index / Stage</strong>（暂存区）：</p>
<p>  <code>.git</code> 目录下的 index 文件，暂存区会记录 <code>git add</code> 添加文件的相关信息（文件名、大小、timestamp…），不保存文件实体，通过 id 指向每个文件实体。可以使用 <code>git status</code> 查看暂存区的状态。暂存区标记了你当前工作区中，哪些内容是被 git 管理的。</p>
<p>  当我们完成某个需求或功能后需要提交到远程仓库，那么第一步就是通过 <code>git add</code> 命令先提交到暂存区，被 git 管理。</p>
</li>
<li><p><strong>Local Repository</strong>（本地仓库）：</p>
<p>  保存了对象被提交过的各个版本，比起工作区和暂存区的内容，它要更旧一些。<code>git commit</code> 后同步index（暂存区）的目录树到本地仓库，方便从下一步通过 <code>git push</code> 同步本地仓库与远程仓库。</p>
</li>
<li><p><strong>Remote Repository</strong>（远程仓库）：</p>
<p>  远程仓库是指托管在一些Git代码托管平台上的你的项目的版本库，比如<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tLw==" title="https://github.com/">GitHub<i class="fa fa-external-link"></i></span>、<span class="exturl" data-url="aHR0cHM6Ly9hYm91dC5naXRsYWIuY29tLw==" title="https://about.gitlab.com/">GitLab<i class="fa fa-external-link"></i></span>、<span class="exturl" data-url="aHR0cHM6Ly9naXRlZS5jb20v" title="https://gitee.com/">码云<i class="fa fa-external-link"></i></span>、<span class="exturl" data-url="aHR0cHM6Ly9jb2RpbmcubmV0Lw==" title="https://coding.net/">码市<i class="fa fa-external-link"></i></span>等等。远程仓库的内容可能被分布在多个地点的处于协作关系的本地仓库修改，因此它可能与本地仓库同步，也可能不同步，但是远程仓库的内容是最旧的。</p>
</li>
</ul>
<p>四个区域之间的关系如下图所示：</p>
<p><img src="/images/images_git/flow.png" alt="Git 工作流程"></p>
<h2 id="常用的Git命令详解"><a href="#常用的Git命令详解" class="headerlink" title="常用的Git命令详解"></a>常用的Git命令详解</h2><h3 id="HEAD"><a href="#HEAD" class="headerlink" title="HEAD"></a>HEAD</h3><p>HEAD，它始终指向当前所处分支的最新的提交点，所处的分支发生了变化，或者产生了新的提交点，HEAD就会跟着改变。</p>
<p><img src="/images/images_git/HEAD.png" alt="HEAD"></p>
<h3 id="git-add"><a href="#git-add" class="headerlink" title="git add"></a>git add</h3><p><code>git add</code> 主要实现将工作区修改的内容提交到暂存区，交由git管理。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 添加当前目录的所有文件到暂存区</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git add .</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 添加指定目录到暂存区，包括子目录</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git add [dir]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 添加指定文件到暂存区</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git add [file]</span></span><br></pre></td></tr></table></figure>

<p><img src="/images/images_git/GitAdd.png" alt="git add"></p>
<h3 id="git-commit"><a href="#git-commit" class="headerlink" title="git commit"></a>git commit</h3><p><code>git commit</code> 主要实现将暂存区的内容提交到本地仓库，并使得当前分支的HEAD向后移动一个提交点。相关命令如下表所示：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 提交暂存区到本地仓库，message代表说明信息</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git commit -m [message]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 提交暂存区的指定文件到本地仓库</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git commit [file] -m [message]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 使用一次新的commit，代替上一次提交</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git commit --amend -m [message]</span></span><br></pre></td></tr></table></figure>

<p><img src="/images/images_git/GitCommit.png" alt="git commit"></p>
<h3 id="git-branch"><a href="#git-branch" class="headerlink" title="git branch"></a>git branch</h3><p>在我们的代码仓库中，有一条主分支Master，我们可以从主分支当中，创建出许多分支以开发其他功能，创建子分支的好处是每个分支互不影响，大家只需要在自己的分支上继续开发，正常工作。待开发完毕后，再将自己的子分支合并到主分支或者其他分支即可，这样，即安全又不影响他人的工作。</p>
<p>关于分支，主要有展示分支、切换分支、创建分支、删除分支操作。相关命令如下表所示：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 列出本地所有分支</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git branch</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 列出所有远程分支</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git branch -r</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 列出所有本地分支和远程分支</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git branch -a</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 新建一个分支，但依然停留在当前分支</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git branch [branch-name]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 新建一个分支，并切换到该分支</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git checkout -b [branch]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 切换到指定分支，并更新工作区</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git checkout [branch-name]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 切换到上一个分支</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git checkout -</span></span><br></pre></td></tr></table></figure>

<p><img src="/images/images_git/GitBranch.png" alt="git branch"></p>
<h3 id="git-merge"><a href="#git-merge" class="headerlink" title="git merge"></a>git merge</h3><p><code>git merge</code> 命令的作用是把不同的分支合并起来。在实际的开发中，我们会从master主分支中创建出一个新的分支，然后进行需求或功能的开发，最后开发完成后需要合并子分支到主分支master中，这就需要用到<code>git merge</code>命令。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 合并指定分支到当前分支</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git merge [branch]</span></span><br></pre></td></tr></table></figure>

<p><img src="/images/images_git/GitMerge.png" alt="git merge"></p>
<h3 id="git-rebase"><a href="#git-rebase" class="headerlink" title="git rebase"></a>git rebase</h3><p>rebase又称为衍合，是合并的另外一种选择。在开始阶段，我们在新的分支上，执行 <code>git rebase dev</code>，那么新分支上的commit都在master分支上重演一遍，最后checkout切换回到新的分支。这一点与merge命令是一样的，合并前后所处的分支并没有改变。</p>
<p><img src="/images/images_git/GitRebase.png" alt="git rebase"></p>
<h3 id="git-reset"><a href="#git-reset" class="headerlink" title="git reset"></a>git reset</h3><p><code>git reset</code> 命令把当前分支指向另一个位置，并且有选择的变动工作目录和索引。也用来从历史仓库中复制文件到索引，而不动工作目录。如果不给选项，那么当前分支指向到那个提交。如果用 <code>–-hard</code> 参数，那么工作目录也更新，如果用 <code>–-soft</code> 参数，那么都不变。使用 <code>git reset HEAD ~3</code> 命令的说明如下图所示：</p>
<p><img src="/images/images_git/GitResetHEAD.png" alt="git reset HEAD~3"></p>
<p>如果没有给出提交的版本号，那么默认用HEAD。这样，分支指向不变，但是索引会回滚到最后一次提交，如果用 <code>–-hard</code> 参数，工作目录也一样。</p>
<p><img src="/images/images_git/GitRset.png" alt="git reset"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 只改变提交点，暂存区和工作目录的内容都不改变</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git reset —-soft [commit]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 改变提交点，同时改变暂存区的内容</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git reset —-mixed [commit]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 暂存区、工作区的内容都会被修改到与提交点完全一致的状态</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git reset —-hard [commit]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 让工作区回到上次提交时的状态</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git reset -—hard HEAD</span></span><br></pre></td></tr></table></figure>

<h3 id="git-revert"><a href="#git-revert" class="headerlink" title="git revert"></a>git revert</h3><p>revert 是用一个新的提交来消除一个历史提交所做的任何修改，revert之后，我们本地的代码会回滚到指定的历史版本。举个例子，其结果如下图所示：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git commit -am <span class="string">'update readme'</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git revert 15df9b6</span></span><br></pre></td></tr></table></figure>

<p><img src="/images/images_git/GitRevert.png" alt="git revert"></p>
<h3 id="git-push"><a href="#git-push" class="headerlink" title="git push"></a>git push</h3><p>将本地仓库分支上传到远程仓库分支，实现同步。相关命令如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 上传本地指定分支到远程仓库</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git push [remote] [branch]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 强行推送当前分支到远程仓库，即使有冲突</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git push [remote] —force</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 推送所有分支到远程仓库</span></span><br><span class="line"><span class="meta">$</span><span class="bash">git push [remote] —all</span></span><br></pre></td></tr></table></figure>

<h3 id="git-fetch"><a href="#git-fetch" class="headerlink" title="git fetch"></a>git fetch</h3><p><code>git fetch</code> 是从远程仓库中获取最新版本到本地仓库中，但不会自动合并本地的版本，也就说，我们可以查看更新情况，然后再决定是否进行合并。在fetch命令中，有一个重要的概念：<strong>FETCH_HEAD</strong>：某个branch在服务器上的最新状态，每一个执行过fetch操作，都会存在一个FETCH_HEAD列表，这个列表保存在 <code>.git</code> 目录的<strong>FETCH_HEAD</strong>文件中，其中每一行对应于远程服务器的每一个分支。当前分支指向的FETCH_HEAD，就是文件第一行对应的那个分支。</p>
<h3 id="git-pull"><a href="#git-pull" class="headerlink" title="git pull"></a>git pull</h3><p><code>git pull</code> 是从远程仓库中获取最新版本并自动合并到本地的仓库。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git pull origin next</span></span><br></pre></td></tr></table></figure>

<p>上面命令表示，取回 <strong>origin/next</strong> 分支的更新，再与当前分支进行合并。实质上，等同于，先做 <code>git fetch</code>，再执行 <code>git merge</code>。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git fetch origin</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git merge origin/next</span></span><br></pre></td></tr></table></figure>

<h2 id="一些命令的区别"><a href="#一些命令的区别" class="headerlink" title="一些命令的区别"></a>一些命令的区别</h2><h3 id="merge-和-rebase"><a href="#merge-和-rebase" class="headerlink" title="merge 和 rebase"></a>merge 和 rebase</h3><p>举个例子说明：现在我们有这样两个分支，test 和 master，其提交记录如下图所示：</p>
<p><img src="/images/images_git/MergeRebase-1.png" alt></p>
<p>在 master 分支上执行 <code>git merge test</code> 命令后，会得到如下图所示的结果：</p>
<p><img src="/images/images_git/MergeRebase-2.png" alt></p>
<p>如果在master分支上执行 <code>git rebase test</code> 命令，则会得到如下图所示的结果：</p>
<p><img src="/images/images_git/MergeRebase-3.png" alt></p>
<p>由上面的例子可以看出，merge操作会生成一个新的节点，之前的提交分开显示。而rebase操作不会生成新的节点，是将两个分支融合成一个线性的提交记录。</p>
<p>如果我们想要一个干净的，没有merge commit的线性历史树，那么应该选择<code>git rebase</code>，如果想保留完整的历史记录，并且想要避免重写commit history的风险，应该选择使用<code>git merge</code>。</p>
<h3 id="reset-和-revert"><a href="#reset-和-revert" class="headerlink" title="reset 和 revert"></a>reset 和 revert</h3><ul>
<li>revert 是用一次新的commit来回滚之前的commit，而 reset 是直接删除指定的commit。</li>
<li>在回滚这一操作上看，效果差不多。但在日后继续merge以前的老版本时有区别。因为 <code>git revert</code> 是用一次逆向的commit“中和”之前的提交，因此日后合并老的分支时，导致这部分改变不会再次出现，减少冲突。但是 <code>git reset</code> 是直接把某个 commit 在某个分支上删除，因而和老的分支再次 merge 时，这些被回滚的commit应该还会被引入，产生很多冲突。</li>
<li><code>git reset</code> 是把HEAD向后移动了一下，而 <code>git revert</code> 是HEAD继续前进，只是新的commit的内容和要revert的内容正好相反，能够抵消要被revert的内容。</li>
</ul>
<h3 id="fetch-和-pull"><a href="#fetch-和-pull" class="headerlink" title="fetch 和 pull"></a>fetch 和 pull</h3><p><code>git fetch</code> 和 <code>git pull</code> 共同点都是从远程的分支获取最新的版本到本地，但fetch命令不会自动将更新合并到本地的分支，而pull命令会自动合并到本地的分支。在实际的使用中，<code>git fetch</code> 要更安全一些，因为获取到最新的更新后，我们可以查看更新情况，然后再决定是否合并。</p>
<h1 id="图解Git-强烈推荐"><a href="#图解Git-强烈推荐" class="headerlink" title="图解Git[强烈推荐]"></a>图解Git[强烈推荐]</h1><h2 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a>基本用法</h2><p><img src="/images/images_git/%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95.png" alt="基本用法"></p>
<p>上面的四条命令在工作目录、暂存目录(也叫做索引)和仓库之间复制文件。</p>
<ul>
<li><code>git add files</code> 把当前文件放入暂存区域。</li>
<li><code>git commit</code> 给暂存区域生成快照并提交。</li>
<li><code>git reset -- files</code> 用来撤销最后一次 <code>git add files</code> ，你也可以用 <code>git reset</code> 撤销所有暂存区域文件。</li>
<li><code>git checkout -- files</code> 把文件从暂存区域复制到工作目录，用来丢弃本地修改。</li>
</ul>
<p>你可以用 <code>git reset -p</code>, <code>git checkout -p</code>,  <code>git add -p</code> 进入交互模式。</p>
<p>也可以跳过暂存区域直接从仓库取出文件或者直接提交代码。</p>
<p><img src="/images/images_git/%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95-1.png" alt></p>
<ul>
<li><code>git commit -a</code> 相当于运行 <code>git add</code> 把所有当前目录下的文件加入暂存区域再运行 <code>git commit</code>.</li>
<li><code>git commit files</code> 进行一次包含最后一次提交加上工作目录中文件快照的提交。并且文件被添加到暂存区域。</li>
<li><code>git checkout HEAD -- files</code> 回滚到复制最后一次提交。</li>
</ul>
<h2 id="约定"><a href="#约定" class="headerlink" title="约定"></a>约定</h2><p>后文中以下面的形式使用图片。</p>
<p><img src="/images/images_git/%E7%BA%A6%E5%AE%9A.png" alt="约定"></p>
<p>绿色的 5 位字符表示提交的 ID，分别指向父节点。分支用橘色显示，分别指向特定的提交。当前分支由附在其上的 <strong>HEAD</strong> 标识。 这张图片里显示最后 5 次提交，<strong>ed489</strong> 是最新提交。 <strong>master</strong> 分支指向此次提交，另一个<strong>maint</strong> 分支指向祖父提交节点。</p>
<h2 id="命令详解"><a href="#命令详解" class="headerlink" title="命令详解"></a>命令详解</h2><h3 id="Diff"><a href="#Diff" class="headerlink" title="Diff"></a>Diff</h3><p>有许多种方法查看两次提交之间的变动。下面是一些示例。</p>
<p><img src="/images/images_git/Diff.png" alt></p>
<h3 id="Commit"><a href="#Commit" class="headerlink" title="Commit"></a>Commit</h3><p>提交时，<code>git</code> 用暂存区域的文件创建一个新的提交，并把此时的节点设为父节点。然后把当前分支指向新的提交节点。下图中，当前分支是 <strong>master</strong>。 在运行命令之前，<strong>master</strong> 指向 <strong>ed489</strong>，提交后，<strong>master</strong> 指向新的节点 <strong>f0cec</strong> 并以 <strong>ed489</strong> 作为父节点。</p>
<p><img src="/images/images_git/Commit.png" alt="Commit"></p>
<p>即便当前分支是某次提交的祖父节点，<code>git</code> 会同样操作。下图中，在 <strong>master</strong> 分支的祖父节点 <strong>maint</strong> 分支进行一次提交，生成了 <strong>1800b</strong>。 这样，<strong>maint</strong> 分支就不再是 <strong>master</strong> 分支的祖父节点。此时，<span class="exturl" data-url="aHR0cDovL21hcmtsb2RhdG8uZ2l0aHViLmNvbS92aXN1YWwtZ2l0LWd1aWRlL2luZGV4LXpoLWNuLmh0bWw/bm8tc3ZnI21lcmdl" title="http://marklodato.github.com/visual-git-guide/index-zh-cn.html?no-svg#merge">合并<i class="fa fa-external-link"></i></span> (或者 <span class="exturl" data-url="aHR0cDovL21hcmtsb2RhdG8uZ2l0aHViLmNvbS92aXN1YWwtZ2l0LWd1aWRlL2luZGV4LXpoLWNuLmh0bWw/bm8tc3ZnI3JlYmFzZQ==" title="http://marklodato.github.com/visual-git-guide/index-zh-cn.html?no-svg#rebase">衍合<i class="fa fa-external-link"></i></span>) 是必须的。</p>
<p><img src="/images/images_git/Commit-1.png" alt></p>
<p>如果想更改一次提交，使用 <code>git commit --amend</code>。<code>git</code> 会使用与当前提交相同的父节点进行一次新提交，旧的提交会被取消。</p>
<p><img src="/images/images_git/Commit-2.png" alt></p>
<p>另一个例子是 <span class="exturl" data-url="aHR0cDovL21hcmtsb2RhdG8uZ2l0aHViLmNvbS92aXN1YWwtZ2l0LWd1aWRlL2luZGV4LXpoLWNuLmh0bWw/bm8tc3ZnI2RldGFjaGVk" title="http://marklodato.github.com/visual-git-guide/index-zh-cn.html?no-svg#detached">分离HEAD提交<i class="fa fa-external-link"></i></span>, 后文讲。</p>
<h3 id="Checkout"><a href="#Checkout" class="headerlink" title="Checkout"></a>Checkout</h3><p><code>checkout</code> 命令通常用来从仓库中取出文件，或者在分支中切换。</p>
<p><code>checkout</code> 命令让 <code>git</code> 把文件复制到工作目录和暂存区域。比如 <code>git checkout HEAD~ foo.c</code> 把文件从 <code>foo.c</code> 提交节点 <code>HEAD~</code> (当前提交节点的父节点)复制到工作目录并且生成索引。注意当前分支没有变化。</p>
<p><img src="/images/images_git/Checkout.png" alt></p>
<p>如果没有指定文件名，而是一个本地分支，那么将切换到那个分支去。同时把索引和工作目录切换到那个分支对应的状态。</p>
<p><img src="/images/images_git/Checkout-1.png" alt></p>
<p>如果既没有指定文件名，也没有指定分支名，而是一个标签、远程分支、SHA-1 值或者是像 <strong>master~3</strong> 类似的东西，就得到一个匿名分支，称作 <strong>detached HEAD</strong>。 这样可以很方便的在历史版本之间互相切换。但是，这样的提交是完全不同的，详细的在<span class="exturl" data-url="aHR0cDovL21hcmtsb2RhdG8uZ2l0aHViLmNvbS92aXN1YWwtZ2l0LWd1aWRlL2luZGV4LXpoLWNuLmh0bWw/bm8tc3ZnI2RldGFjaGVk" title="http://marklodato.github.com/visual-git-guide/index-zh-cn.html?no-svg#detached">下面<i class="fa fa-external-link"></i></span>。</p>
<p><img src="/images/images_git/Checkout-2.png" alt></p>
<h3 id="用分离HEAD提交-找不到好的译法"><a href="#用分离HEAD提交-找不到好的译法" class="headerlink" title="用分离HEAD提交(找不到好的译法)"></a>用分离HEAD提交(找不到好的译法)</h3><p><strong>HEAD</strong> 是分离的时候, 提交可以正常进行, 但是没有更新已命名的分支 。(可以看作是匿名分支。)</p>
<p><img src="/images/images_git/Commit-3.png" alt></p>
<p>如果此时切换到别的分支，那么所作的工作会全部丢失。注意这个命令之后就不存在 <strong>2eecb</strong> 了。</p>
<p><img src="/images/images_git/Checkout-3.png" alt></p>
<p>如果你想保存当前的状态，可以用这个命令创建一个新的分支: <code>git checkout -b name</code>。</p>
<p><img src="/images/images_git/Checkout-4.png" alt></p>
<h3 id="Reset"><a href="#Reset" class="headerlink" title="Reset"></a>Reset</h3><p><code>reset</code> 命令把当前分支指向另一个位置，并且有选择的变动工作目录和索引。也用来在从历史仓库中复制文件到索引，而不动工作目录。</p>
<p>如果不给选项，那么当前分支指向到那个提交。如果用 <code>--hard</code> 选项，那么工作目录也更新，如果用 <code>--soft</code> 选项，那么都不变。</p>
<p><img src="/images/images_git/Reset.png" alt></p>
<p>如果没有给出提交点的版本号，那么默认用 <strong>HEAD</strong>。这样，分支指向不变，但是索引会回滚到最后一次提交，如果用 <code>--hard</code> 选项，工作目录也同样。</p>
<p><img src="/images/images_git/Reset-1.png" alt></p>
<p>如果给了文件名(或者 <code>-p</code> 选项), 那么工作效果和带文件名的<span class="exturl" data-url="aHR0cDovL21hcmtsb2RhdG8uZ2l0aHViLmNvbS92aXN1YWwtZ2l0LWd1aWRlL2luZGV4LXpoLWNuLmh0bWw/bm8tc3ZnI2NoZWNrb3V0" title="http://marklodato.github.com/visual-git-guide/index-zh-cn.html?no-svg#checkout">checkout<i class="fa fa-external-link"></i></span>差不多，除了索引被更新。</p>
<p><img src="/images/images_git/Reset-2.png" alt></p>
<h3 id="Merge"><a href="#Merge" class="headerlink" title="Merge"></a>Merge</h3><p><code>merge</code> 命令把不同分支合并起来。合并前，索引必须和当前提交相同。如果另一个分支是当前提交的祖父节点，那么合并命令将什么也不做。 另一种情况是如果当前提交是另一个分支的祖父节点，就导致 <strong>fast-forward</strong> 合并。指向只是简单的移动，并生成一个新的提交。</p>
<p><img src="/images/images_git/Merge.png" alt></p>
<p>否则就是一次真正的合并。默认把当前提交( <strong>ed489</strong> 如下所示) 和另一个提交( <strong>33104</strong> )以及他们的共同祖父节点( <strong>b325c</strong> ) 进行一次<span class="exturl" data-url="aHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9UaHJlZS13YXlfbWVyZ2U=" title="http://en.wikipedia.org/wiki/Three-way_merge">三方合并<i class="fa fa-external-link"></i></span>。结果是先保存当前目录和索引，然后和父节点 <strong>33104</strong> 一起做一次新提交。</p>
<p><img src="/images/images_git/Merge-1.png" alt></p>
<h3 id="Cherry-Pick"><a href="#Cherry-Pick" class="headerlink" title="Cherry Pick"></a>Cherry Pick</h3><p><code>cherry-pick</code> 命令”复制”一个提交节点并在当前复制做一次完全一样的新提交。</p>
<p><img src="/images/images_git/CherryPick.png" alt></p>
<h3 id="Rebase"><a href="#Rebase" class="headerlink" title="Rebase"></a>Rebase</h3><p>衍合是合并命令的另一种选择。合并把两个父分支合并进行一次提交，提交历史不是线性的。衍合在当前分支上重演另一个分支的历史，提交历史是线性的。 本质上，这是线性化的自动的 <span class="exturl" data-url="aHR0cDovL21hcmtsb2RhdG8uZ2l0aHViLmNvbS92aXN1YWwtZ2l0LWd1aWRlL2luZGV4LXpoLWNuLmh0bWw/bm8tc3ZnI2NoZXJyeS1waWNr" title="http://marklodato.github.com/visual-git-guide/index-zh-cn.html?no-svg#cherry-pick">cherry-pick<i class="fa fa-external-link"></i></span></p>
<p><img src="/images/images_git/Rebase.png" alt></p>
<p>上面的命令都在 <strong>topic</strong> 分支中进行，而不是 <strong>master</strong> 分支，在 <strong>master</strong> 分支上重演，并且把分支指向新的节点。注意旧提交没有被引用，将被回收。</p>
<p>要限制回滚范围，使用 <code>--onto</code> 选项。下面的命令在 <strong>master</strong> 分支上重演当前分支从 <strong>169a6</strong> 以来的最近几个提交，即 <strong>2c33a</strong>。</p>
<p><img src="/images/images_git/Rebase-1.png" alt></p>
<p>同样有 <code>git rebase --interactive</code> 让你更方便的完成一些复杂操组，比如丢弃、重排、修改、合并提交。没有图片体现着下，细节看这里: <span class="exturl" data-url="aHR0cDovL3d3dy5rZXJuZWwub3JnL3B1Yi9zb2Z0d2FyZS9zY20vZ2l0L2RvY3MvZ2l0LXJlYmFzZS5odG1sI19pbnRlcmFjdGl2ZV9tb2Rl" title="http://www.kernel.org/pub/software/scm/git/docs/git-rebase.html#_interactive_mode">git-rebase(1)<i class="fa fa-external-link"></i></span></p>
<h1 id="图解Git原理与日常实用指南"><a href="#图解Git原理与日常实用指南" class="headerlink" title="图解Git原理与日常实用指南"></a>图解Git原理与日常实用指南</h1><h2 id="Feature-Branching：最流行的工作流"><a href="#Feature-Branching：最流行的工作流" class="headerlink" title="Feature Branching：最流行的工作流"></a>Feature Branching：最流行的工作流</h2><p>核心：</p>
<ol>
<li>任何新的功能（feature）或 bug 修复全都新建一个 branch 来写；</li>
<li>branch 写完后，合并到 master，然后删掉这个 branch（可使用 <code>git origin -d 分支名</code> 删除远程仓库的分支）。</li>
</ol>
<p><img src="/images/images_git/GitGraph-0.gif" alt></p>
<p>优势：</p>
<ol>
<li>代码分享：写完之后可以在开发分支 review 之后再 merge 到 master 分支</li>
<li>一人多任务：当正在开发接到更重要的新任务时，你只要稍微把目前未提交的代码简单收尾一下，然后做一个带有「未完成」标记的提交（例如，在提交信息里标上「TODO」），然后回到 master 去创建一个新的 branch 进行开发就好了。</li>
</ol>
<h2 id="HEAD、branch、引用的本质以及-push-的本质"><a href="#HEAD、branch、引用的本质以及-push-的本质" class="headerlink" title="HEAD、branch、引用的本质以及 push 的本质"></a>HEAD、branch、引用的本质以及 push 的本质</h2><h3 id="HEAD：当前commit的引用"><a href="#HEAD：当前commit的引用" class="headerlink" title="HEAD：当前commit的引用"></a>HEAD：当前commit的引用</h3><p>当前 <code>commit</code> 在哪里，<strong>HEAD</strong> 就在哪里，这是一个永远自动指向当前 <code>commit</code> 的引用，所以你永远可以用 <strong>HEAD</strong> 来操作当前 <code>commit</code>，</p>
<h3 id="branch："><a href="#branch：" class="headerlink" title="branch："></a>branch：</h3><p><strong>HEAD</strong> 是 Git 中一个独特的引用，它是唯一的。而除了 <strong>HEAD</strong> 之外，Git 还有一种引用，叫做 <strong>branch</strong>（分支）。<strong>HEAD</strong> 除了可以指向 <code>commit</code>，还可以指向一个 <strong>branch</strong>，当指向一个 <strong>branch</strong> 时，<strong>HEAD</strong> 会通过<strong>branch</strong> 间接指向当前 <code>commit</code>，<strong>HEAD</strong> 移动会带着 <strong>branch</strong> 一起移动：</p>
<p><img src="/images/images_git/GitGraph-1.gif" alt></p>
<p><strong>branch</strong> 包含了从初始 <code>commit</code> 到它的所有路径，而不是一条路径。并且，这些路径之间也是彼此平等的。</p>
<p><img src="/images/images_git/GitGraph-2.gif" alt></p>
<p>像上图这样，<strong>master</strong> 在合并了 <strong>branch1</strong> 之后，从初始 <code>commit</code> 到 <strong>master</strong> 有了两条路径。这时，<strong>master</strong> 的串就包含了 <code>1 2 3 4 7</code> 和 <code>1 2 5 6 7</code> 这两条路径。而且，这两条路径是平等的，<code>1 2 3 4 7</code> 这条路径并不会因为它是「原生路径」而拥有任何的特别之处</p>
<p>创建<strong>branch</strong>：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git branch 名称</span></span><br></pre></td></tr></table></figure>

<p>切换<strong>branch</strong>：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git checkout 名称  <span class="comment"># 将 HEAD指向该 branch</span></span></span><br></pre></td></tr></table></figure>

<p>创建 + 切换：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git checkout -b 名称</span></span><br></pre></td></tr></table></figure>

<p>在切换到新的 <strong>branch</strong> 后，再次 <code>commit</code> 时 <strong>HEAD</strong> 就会带着新的 <strong>branch</strong> 移动了：</p>
<p><img src="/images/images_git/GitGraph-3.gif" alt></p>
<p>而这个时候，如果你再切换到 <strong>master</strong> 去 <code>commit</code>，就会真正地出现分叉了：</p>
<p><img src="/images/images_git/GitGraph-4.gif" alt></p>
<p>删除<strong>branch</strong>：<code>git branch -d 名称</code></p>
<p>注意：</p>
<ol>
<li><strong>HEAD</strong> 指向的 <strong>branch</strong> 不能删除。如果要删除 <strong>HEAD</strong> 指向的 <strong>branch</strong>，需要先用 <code>checkout</code> 把 <strong>HEAD</strong> 指向其他地方。</li>
<li>由于 Git 中的 <strong>branch</strong> 只是一个引用，所以删除 <strong>branch</strong> 的操作也只会删掉这个引用，并不会删除任何的 <code>commit</code>。（不过如果一个 <code>commit</code> 不在任何一个 <strong>branch</strong> 的「路径」上，或者换句话说，如果没有任何一个 <strong>branch</strong> 可以回溯到这条 <code>commit</code>（也许可以称为野生 <code>commit</code>？），那么在一定时间后，它会被 Git 的回收机制删除掉）</li>
<li>出于安全考虑，没有被合并到 <strong>master</strong> 过的 <strong>branch</strong> 在删除时会失败（怕误删未完成<strong>branch</strong>）把 <code>-d</code> 换成 <code>-D</code> 可以强制删除</li>
</ol>
<h3 id="引用的本质"><a href="#引用的本质" class="headerlink" title="引用的本质"></a>引用的本质</h3><p>所谓引用，其实就是一个个的字符串。这个字符串可以是一个 <code>commit</code> 的 SHA-1 码（例：c08de9a4d8771144cd23986f9f76c4ed729e69b0），也可以是一个 <strong>branch</strong>（例：ref: refs/heads/feature3）。</p>
<p>Git 中的 <strong>HEAD</strong> 和每一个 <strong>branch</strong> 以及其他的引用，都是以文本文件的形式存储在本地仓库 <code>.git</code> 目录中，而 Git 在工作的时候，就是通过这些文本文件的内容来判断这些所谓的「引用」是指向谁的。</p>
<h3 id="push的本质：把-branch-上传到远程仓库"><a href="#push的本质：把-branch-上传到远程仓库" class="headerlink" title="push的本质：把 branch 上传到远程仓库"></a>push的本质：把 branch 上传到远程仓库</h3><ol>
<li>把当前 <strong>branch</strong> 位置上传到远程仓库，并把它路径上的 <code>commits</code> 一并上传</li>
<li>git 中（2.0及以后版本），<code>git push</code> 不加参数只能上传到从远程仓库 <code>clone</code> 或者 <code>pull</code> 下来的分支，如需 <code>push</code> 在本地创建的分支则需使用 <code>git push origin 分支名</code> 的命令</li>
<li>远端仓库的 <strong>HEAD</strong> 并不随 <code>push</code> 与本地一致，远端仓库 <strong>HEAD</strong> 永远指向默认分支（<strong>master</strong>），并随之移动（可以使用 <code>git br -r</code> 查看远程分支的 <strong>HEAD</strong> 指向）。</li>
</ol>
<h2 id="开启git操作之旅"><a href="#开启git操作之旅" class="headerlink" title="开启git操作之旅"></a>开启git操作之旅</h2><h3 id="merge：合并"><a href="#merge：合并" class="headerlink" title="merge：合并"></a>merge：合并</h3><p>含义：从目标 <code>commit</code> 和当前 <code>commit</code> （即 <strong>HEAD</strong> 所指向的 <code>commit</code>）分叉的位置起，把目标 <code>commit</code>  的路径上的所有 <code>commit</code> 的内容一并应用到当前 <code>commit</code>，然后自动生成一个新的 <code>commit</code>。</p>
<p><img src="/images/images_git/GitGraph-5.gif" alt></p>
<p>当执行 <code>git merge branch1</code> 操作，Git 会把 5 和 6 这两个 <code>commit</code> 的内容一并应用到 4 上，然后生成一个新的提交 7 。</p>
<p><code>merge</code> 的特殊情况：</p>
<ol>
<li><code>merge</code> 冲突：你的两个分支改了相同的内容，Git 不知道应该以哪个为准。如果在 <code>merge</code> 的时候发生了这种情况，Git 就会把问题交给你来决定。具体地，它会告诉你 <code>merge</code> 失败，以及失败的原因；这时候你只需要手动解决掉冲突并重新 add、commit（改动不同文件或同一文件的不同行都不会产生冲突）；或者使用 <code>git merge --abort</code> 放弃解决冲突，取消 <code>merge</code></li>
<li><strong>HEAD</strong> 领先于目标 <code>commit</code>：<code>merge</code>是一个空操作：</li>
</ol>
<p><img src="/images/images_git/GitGraph-6.gif" alt></p>
<p>此时 <code>merge</code> 不会有任何反应。</p>
<ol start="3">
<li><strong>HEAD</strong> 落后于 目标 <code>commit</code> 且不存在分支（<strong>fast-forward</strong>）：</li>
</ol>
<p><img src="/images/images_git/GitGraph-7.gif" alt></p>
<p>git 会直接把 <strong>HEAD</strong> 与其指向的 <strong>branch</strong>（如果有的话）一起移动到目标 <code>commit</code>。</p>
<h3 id="rebase：给commit序列重新设置基础点"><a href="#rebase：给commit序列重新设置基础点" class="headerlink" title="rebase：给commit序列重新设置基础点"></a>rebase：给commit序列重新设置基础点</h3><p>有些人不喜欢 <code>merge</code>，因为在 <code>merge</code> 之后，<code>commit</code> 历史就会出现分叉，这种分叉再汇合的结构会让有些人觉得混乱而难以管理。如果你不希望 <code>commit</code>  历史出现分叉，可以用 <code>rebase</code> 来代替 <code>merge</code>。</p>
<p><img src="/images/images_git/GitGraph-8.gif" alt></p>
<p>可以看出，通过 <code>rebase</code>，5 和 6 两条 <code>commits</code> 把基础点从 2 换成了 4 。通过这样的方式，就让本来分叉了的提交历史重新回到了一条线。这种「重新设置基础点」的操作，就是 <code>rebase</code> 的含义。另外，在 <code>rebase</code> 之后，记得切回 <code>master</code> 再 <code>merge</code> 一下，把 <code>master</code> 移到最新的 <code>commit</code>。</p>
<blockquote>
<p>为什么要从 <strong>branch1</strong> 来 <code>rebase</code>，然后再切回 <strong>master</strong> 再 <code>merge</code>一下这么麻烦，而不是直接在 <strong>master</strong> 上执行 <code>rebase</code>？</p>
<p>从图中可以看出，<code>rebase</code>后的每个 <code>commit</code>虽然内容和 <code>rebase</code>之前相同，但它们已经是不同的 <code>commit</code>了（每个<code>commit</code>有唯一标志）。如果直接从 <strong>master</strong> 执行 <code>rebase</code>的话，就会是下面这样：</p>
<p><img src="/images/images_git/GitGraph-9.gif" alt></p>
<p>这就导致 <strong>master</strong> 上之前的两个最新 <code>commit</code> （3和4）被剔除了。如果这两个 <code>commit</code>之前已经在远程仓库存在，这就会导致没法 <code>push</code> ：</p>
<p><img src="/images/images_git/GitGraph-10.gif" alt></p>
<p>所以，为了避免和远程仓库发生冲突，一般不要从 <strong>master</strong> 向其他 <strong>branch</strong> 执行 <code>rebase</code> 操作。而如果是 <strong>master</strong> 以外的 <strong>branch</strong> 之间的 <code>rebase</code>（比如 <strong>branch1</strong> 和 <strong>branch2</strong> 之间），就不必这么多费一步，直接 <code>rebase</code> 就好。</p>
</blockquote>
<p>需要说明的是, <code>rebase</code> 是站在需要被 <code>rebase</code> 的 <code>commit</code>上进行操作，这点和 <code>merge</code>是不同的。</p>
<h3 id="stash：临时存放工作目录的改动"><a href="#stash：临时存放工作目录的改动" class="headerlink" title="stash：临时存放工作目录的改动"></a>stash：临时存放工作目录的改动</h3><p><code>stash</code> 指令可以帮你把工作目录的内容全部放在你本地的一个独立的地方，它不会被提交，也不会被删除，你把东西放起来之后就可以去做你的临时工作了，做完以后再来取走，就可以继续之前手头的事了。</p>
<p> 操作步骤：</p>
<ol>
<li><code>git stash</code>可以加上 <code>save</code> 参数后面带备注信息（<code>git stash save &#39;备注信息&#39;</code>）</li>
<li>此时工作目录已经清空，可以切换到其他分支干其他事情了</li>
<li><code>git stash pop</code> 弹出第一个 <code>stash</code>（该 stash 从历史 stash 中移除）；或者使用 <code>git stash apply</code> 达到相同的效果（该 stash 仍存在 stash list 中），同时可以使用 <code>git stash list</code> 查看 stash 历史记录并在 apply 后面加上指定的 stash 返回到该 stash。</li>
</ol>
<p>注意：没有被 track 的文件会被 git 忽略而不被 stash，如果想一起 stash，加上 <code>-u</code> 参数。</p>
<h3 id="reflog：引用记录的log"><a href="#reflog：引用记录的log" class="headerlink" title="reflog：引用记录的log"></a>reflog：引用记录的log</h3><p>可以查看 git 的引用记录，不指定参数，默认显示 <strong>HEAD</strong> 的引用记录；如果不小心把分支删掉了，可以使用该命令查看引用记录，然后使用 checkout 切到该记录处重建分支即可。</p>
<blockquote>
<p>注意：不再被引用直接或间接指向的 commits 会在一定时间后被 Git 回收，所以使用 reflog 来找回被删除的 branch 的操作一定要及时，不然有可能会由于 commit 被回收而再也找不回来。</p>
</blockquote>
<h3 id="看看我都改了什么"><a href="#看看我都改了什么" class="headerlink" title="看看我都改了什么"></a>看看我都改了什么</h3><p><strong>log：查看已提交内容</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">log</span> -p 		<span class="comment"># 可以查看每个 commit 的改动细节（到改动文件的每一行）</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">log</span> --<span class="built_in">stat</span> 	<span class="comment"># 查看简要统计（哪几个文件改动了）</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git show 指定commit 指定文件名 	<span class="comment"># 查看指定 commit 的指定文件改动细节</span></span></span><br></pre></td></tr></table></figure>

<p><strong>diff：查看未提交内容</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git diff --staged </span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 可以显示暂存区和上一条提交之间的不同。换句话说，这条指令可以让你看到「如果你立即输入 git commit，你将会提交什么」</span></span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> git diff </span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 可以显示工作目录和暂存区之间的不同。换句话说，这条指令可以让你看到「如果你现在把所有文件都 add，你会向暂存区中增加哪些内容」</span></span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> git diff HEAD </span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 可以显示工作目录和上一条提交之间的不同，它是上面这二者的内容相加。换句话说，这条指令可以让你看到「如果你现在把所有文件都 add 然后 git commit，你将会提交什么」（不过需要注意，没有被 Git 记录在案的文件（即从来没有被 add 过的文件，untracked files 并不会显示出来。因为对 Git 来说它并不存在）实质上，如果你把 HEAD 换成别的 commit，也可以显示当前工作目录和这条 commit 的区别。</span></span><br></pre></td></tr></table></figure>

<h3 id="刚刚提交的代码发现写错了怎么办？"><a href="#刚刚提交的代码发现写错了怎么办？" class="headerlink" title="刚刚提交的代码发现写错了怎么办？"></a>刚刚提交的代码发现写错了怎么办？</h3><p>再提一个修复了错误的 <code>commit</code>？可以是可以，不过还有一个更加优雅和简单的解决方法：<code>commit --amend</code>。</p>
<p>具体做法：</p>
<ol>
<li>修改好问题</li>
<li>将修改 add 到暂存区</li>
<li>使用 <code>git commit --amend</code> 提交修改，结果如下图：</li>
</ol>
<p><img src="/images/images_git/GitGraph-11.gif" alt></p>
<p>减少了一次无谓的 <code>commit</code>。</p>
<h3 id="错误不是最新的提交而是倒数第二个？"><a href="#错误不是最新的提交而是倒数第二个？" class="headerlink" title="错误不是最新的提交而是倒数第二个？"></a>错误不是最新的提交而是倒数第二个？</h3><p>使用 <code>rebase -i</code>（交互式 <code>rebase</code>）：</p>
<p>所谓「交互式 <code>rebase</code>」，就是在 <code>rebase</code>的操作执行之前，你可以指定要 <code>rebase</code>的 <code>commit</code>链中的每一个 <code>commit</code>是否需要进一步修改，那么你就可以利用这个特点，进行一次「原地 <code>rebase</code>」。</p>
<p> 操作过程：</p>
<ol>
<li><code>git rebase -i HEAD^^</code></li>
</ol>
<blockquote>
<p>说明：在 Git 中，有两个「偏移符号」： <code>^</code> 和 <code>~</code>。</p>
<p><code>^</code> 的用法：在 <code>commit</code>的后面加一个或多个 <code>^</code> 号，可以把 <code>commit</code> 往回偏移，偏移的数量是 <code>^</code> 的数量。例如：<strong>master^</strong> 表示 <strong>master</strong> 指向的 <code>commit</code>之前的那个 <code>commit</code>； <strong>HEAD^^</strong> 表示 <strong>HEAD</strong> 所指向的 <code>commit</code> 往前数两个 <code>commit</code>。 </p>
<p><code>~</code> 的用法：在 <code>commit</code>的后面加上 <code>~</code> 号和一个数，可以把 <code>commit</code>往回偏移，偏移的数量是 <code>~</code> 号后面的数。例如：<strong>HEAD~5</strong> 表示 <strong>HEAD</strong> 指向的 <code>commit</code> 往前数 5 个 <code>commit</code>。</p>
</blockquote>
<p>上面这行代码表示，把当前 <code>commit</code> （ <strong>HEAD</strong> 所指向的 <code>commit</code>） <code>rebase</code>到 <strong>HEAD</strong> 之前 2 个的 <code>commit</code> 上：</p>
<p><img src="/images/images_git/GitGraph-12.gif" alt></p>
<ol start="2">
<li>进入编辑页面，选择 <code>commit</code> 对应的操作，<code>commit</code> 为正序排列，旧的在上，新的在下，前面黄色的为如何操作该 <code>commit</code>，默认 <code>pick</code>（直接应用该 <code>commit</code> 不做任何改变），修改第一个 <code>commit</code> 为 <code>edit</code>（应用这个 <code>commit</code>，然后停下来等待继续修正）然后 <code>:wq</code> 退出编辑页面，此时 <code>rebase</code> 停在第二个 <code>commit</code> 的位置，此时可以对内容进行修改：</li>
</ol>
<p><img src="/images/images_git/GitGraph-13.png" alt></p>
<p><img src="/images/images_git/GitGraph-14.png" alt></p>
<ol start="3">
<li>修改完后使用 add，<code>commit --amend</code> 将修改提交</li>
<li><code>git rebase --continue</code> 继续 <code>rebase</code> 过程，把后面的 <code>commit</code> 直接应用上去，这次交互式 <code>rebase</code> 的过程就完美结束了，你的那个倒数第二个写错的 <code>commit</code> 就也被修正了：</li>
</ol>
<p><img src="/images/images_git/GitGraph-15.gif" alt></p>
<h3 id="想直接丢弃某次提交？"><a href="#想直接丢弃某次提交？" class="headerlink" title="想直接丢弃某次提交？"></a>想直接丢弃某次提交？</h3><p><strong>reset –hard 丢弃最新的提交</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git reset --hard HEAD^</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>HEAD^</strong> 表示 <strong>HEAD</strong> 往回数一个位置的 <code>commit</code>，上节刚说过，记得吧？</p>
</blockquote>
<p><img src="/images/images_git/GitGraph-16.gif" alt></p>
<p><strong>用交互式 rebase 撤销历史提交</strong></p>
<p>操作步骤与修改历史提交类似，第二步把需要撤销的 <code>commit</code> 修改为 <code>drop</code>，其他步骤不再赘述。</p>
<p><strong>用 rebase –onto 撤销提交</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git rebase --onto HEAD^^ HEAD^ branch1</span></span><br></pre></td></tr></table></figure>

<p>上面这行代码的意思是：以倒数第二个 <code>commit</code>为起点（起点不包含在 <code>rebase</code>序列里），<strong>branch1</strong> 为终点，<code>rebase</code> 到倒数第三个 <code>commit</code> 上。</p>
<p><img src="/images/images_git/GitGraph-17.gif" alt></p>
<h3 id="错误代码已经push？"><a href="#错误代码已经push？" class="headerlink" title="错误代码已经push？"></a>错误代码已经push？</h3><p>有的时候，代码 push 到了远程仓库，才发现有个 commit 写错了。这种问题的处理分两种情况：</p>
<p><strong>出错内容在自己的分支</strong></p>
<p>假如是某个你自己独立开发的 branch 出错了，不会影响到其他人，那没关系用前面几节讲的方法把写错的 commit 修改或者删除掉，然后再 push 上去就好了。但是此时会push报错，因为远程仓库包含本地没有的 commits（在本地已经被替换或被删除了），此时直接使用 <code>git push origin 分支名 -f</code> 强制 push。</p>
<p><strong>问题内容已合并到master</strong></p>
<ol>
<li>增加新提交覆盖之前内容</li>
<li>使用 <code>git revert 指定commit</code> 它的用法很简单，你希望撤销哪个 commit，就把它填在后面。如：<code>git revert HEAD^</code> </li>
</ol>
<p>上面这行代码就会增加一条新的 commit，它的内容和倒数第二个 commit 是相反的，从而和倒数第二个 commit 相互抵消，达到撤销的效果。在 revert 完成之后，把新的 commit 再 push 上去，这个 commit 的内容就被撤销了。它和前面所介绍的撤销方式相比，最主要的区别是，这次改动只是被「反转」了，并没有在历史中消失掉，你的历史中会存在两条 commit ：一个原始 commit ，一个对它的反转 commit。</p>
<h3 id="reset：不止可以撤销提交"><a href="#reset：不止可以撤销提交" class="headerlink" title="reset：不止可以撤销提交"></a>reset：不止可以撤销提交</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git reset --hard </span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 指定commit你的工作目录里的内容会被完全重置为和指定commit位置相同的内容。换句话说，就是你的未提交的修改会被全部擦掉。</span></span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> git reset --soft </span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 指定commit会在重置 HEAD 和 branch 时，保留工作目录和暂存区中的内容，并把重置 HEAD 所带来的新的差异放进暂存区。什么是「重置 HEAD 所带来的新的差异」？就是这里：</span></span><br></pre></td></tr></table></figure>

<p><img src="/images/images_git/GitGraph-18.gif" alt></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git reset --mixed（或者不加参数） 指定commit</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 保留工作目录，并且清空暂存区。也就是说，工作目录的修改、暂存区的内容以及由 reset 所导致的新的文件差异，都会被放进工作区。简而言之，就是「把所有差异都混合（mixed）放在工作区中」。</span></span><br></pre></td></tr></table></figure>

<h3 id="checkout：签出指定commit"><a href="#checkout：签出指定commit" class="headerlink" title="checkout：签出指定commit"></a>checkout：签出指定commit</h3><p>checkout的本质是签出指定的 commit，不止可以切换 <strong>branch</strong> 还可以指定 commit 作为参数，把 <strong>HEAD</strong> 移动到指定的 commit 上；与 reset 的区别在于只移动 <strong>HEAD</strong> 不改变绑定的 <strong>branch</strong>；<code>git checkout --detach</code> 可以把 <strong>HEAD</strong> 和 <strong>branch</strong> 脱离，直接指向当前 commit。</p>
<p><img src="/images/images_git/GitGraph-19.gif" alt></p>
<h1 id="常用-Git-命令清单"><a href="#常用-Git-命令清单" class="headerlink" title="常用 Git 命令清单"></a>常用 Git 命令清单</h1><p>一般来说，日常使用只要记住下图6个命令，就可以了。但是熟练使用，恐怕要记住60～100个命令。</p>
<p><img src="/images/images_git/GitFrame.png" alt></p>
<p>下面是我整理的常用 Git 命令清单。几个专用名词的译名如下。</p>
<ul>
<li><strong>Workspace</strong>：工作区</li>
<li><strong>Index / Stage</strong>：暂存区</li>
<li><strong>Repository</strong>：仓库区（或本地仓库）</li>
<li><strong>Remote</strong>：远程仓库</li>
</ul>
<h2 id="一、新建代码库"><a href="#一、新建代码库" class="headerlink" title="一、新建代码库"></a>一、新建代码库</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 在当前目录新建一个Git代码库</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git init</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 新建一个目录，将其初始化为Git代码库</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git init [project-name]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 下载一个项目和它的整个代码历史</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">clone</span> [url]</span></span><br></pre></td></tr></table></figure>

<h2 id="二、配置"><a href="#二、配置" class="headerlink" title="二、配置"></a>二、配置</h2><p>Git的设置文件为 <code>.gitconfig</code>，它可以在用户主目录下（全局配置），也可以在项目目录下（项目配置）。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 显示当前的Git配置</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git config --list</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 编辑Git配置文件</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git config -e [--global]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 设置提交代码时的用户信息</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git config [--global] user.name <span class="string">"[name]"</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git config [--global] user.email <span class="string">"[email address]"</span></span></span><br></pre></td></tr></table></figure>

<h2 id="三、增加-删除文件"><a href="#三、增加-删除文件" class="headerlink" title="三、增加/删除文件"></a>三、增加/删除文件</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 添加指定文件到暂存区</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git add [file1] [file2] ...</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 添加指定目录到暂存区，包括子目录</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git add [dir]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 添加当前目录的所有文件到暂存区</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git add .</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 添加每个变化前，都会要求确认</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 对于同一个文件的多处变化，可以实现分次提交</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git add -p</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 删除工作区文件，并且将这次删除放入暂存区</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git rm [file1] [file2] ...</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 停止追踪指定文件，但该文件会保留在工作区</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git rm --cached [file]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 改名文件，并且将这个改名放入暂存区</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git mv [file-original] [file-renamed]</span></span><br></pre></td></tr></table></figure>

<h2 id="四、代码提交"><a href="#四、代码提交" class="headerlink" title="四、代码提交"></a>四、代码提交</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 提交暂存区到仓库区</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git commit -m [message]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 提交暂存区的指定文件到仓库区</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git commit [file1] [file2] ... -m [message]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 提交工作区自上次commit之后的变化，直接到仓库区</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git commit -a</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 提交时显示所有diff信息</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git commit -v</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 使用一次新的commit，替代上一次提交</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 如果代码没有任何新变化，则用来改写上一次commit的提交信息</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git commit --amend -m [message]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 重做上一次commit，并包括指定文件的新变化</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git commit --amend [file1] [file2] ...</span></span><br></pre></td></tr></table></figure>

<h2 id="五、分支"><a href="#五、分支" class="headerlink" title="五、分支"></a>五、分支</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 列出所有本地分支</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git branch</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 列出所有远程分支</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git branch -r</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 列出所有本地分支和远程分支</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git branch -a</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 新建一个分支，但依然停留在当前分支</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git branch [branch-name]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 新建一个分支，并切换到该分支</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git checkout -b [branch]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 新建一个分支，指向指定commit</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git branch [branch] [commit]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 新建一个分支，与指定的远程分支建立追踪关系</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git branch --track [branch] [remote-branch]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 切换到指定分支，并更新工作区</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git checkout [branch-name]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 切换到上一个分支</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git checkout -</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 建立追踪关系，在现有分支与指定的远程分支之间</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git branch --<span class="built_in">set</span>-upstream [branch] [remote-branch]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 合并指定分支到当前分支</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git merge [branch]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 选择一个commit，合并进当前分支</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git cherry-pick [commit]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 删除分支</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git branch -d [branch-name]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 删除远程分支</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git push origin --delete [branch-name]</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git branch -dr [remote/branch]</span></span><br></pre></td></tr></table></figure>

<h2 id="六、标签"><a href="#六、标签" class="headerlink" title="六、标签"></a>六、标签</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 列出所有tag</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git tag</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 新建一个tag在当前commit</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git tag [tag]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 新建一个tag在指定commit</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git tag [tag] [commit]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 删除本地tag</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git tag -d [tag]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 删除远程tag</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git push origin :refs/tags/[tagName]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看tag信息</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git show [tag]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 提交指定tag</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git push [remote] [tag]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 提交所有tag</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git push [remote] --tags</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 新建一个分支，指向某个tag</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git checkout -b [branch] [tag]</span></span><br></pre></td></tr></table></figure>

<h2 id="七、查看信息"><a href="#七、查看信息" class="headerlink" title="七、查看信息"></a>七、查看信息</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 显示有变更的文件</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git status</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 显示当前分支的版本历史</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">log</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 显示commit历史，以及每次commit发生变更的文件</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">log</span> --<span class="built_in">stat</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 搜索提交历史，根据关键词</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">log</span> -S [keyword]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 显示某个commit之后的所有变动，每个commit占据一行</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">log</span> [tag] HEAD --pretty=format:%s</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 显示某个commit之后的所有变动，其<span class="string">"提交说明"</span>必须符合搜索条件</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">log</span> [tag] HEAD --grep feature</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 显示某个文件的版本历史，包括文件改名</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">log</span> --follow [file]</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git whatchanged [file]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 显示指定文件相关的每一次diff</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">log</span> -p [file]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 显示过去5次提交</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">log</span> -5 --pretty --oneline</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 显示所有提交过的用户，按提交次数排序</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git shortlog -sn</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 显示指定文件是什么人在什么时间修改过</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git blame [file]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 显示暂存区和工作区的差异</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git diff</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 显示暂存区和上一个commit的差异</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git diff --cached [file]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 显示工作区与当前分支最新commit之间的差异</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git diff HEAD</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 显示两次提交之间的差异</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git diff [first-branch]...[second-branch]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 显示今天你写了多少行代码</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git diff --shortstat <span class="string">"@&#123;0 day ago&#125;"</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 显示某次提交的元数据和内容变化</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git show [commit]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 显示某次提交发生变化的文件</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git show --name-only [commit]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 显示某次提交时，某个文件的内容</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git show [commit]:[filename]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 显示当前分支的最近几次提交</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git reflog</span></span><br></pre></td></tr></table></figure>

<h2 id="八、远程同步"><a href="#八、远程同步" class="headerlink" title="八、远程同步"></a>八、远程同步</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 下载远程仓库的所有变动</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git fetch [remote]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 显示所有远程仓库</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git remote -v</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 显示某个远程仓库的信息</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git remote show [remote]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 增加一个新的远程仓库，并命名</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git remote add [shortname] [url]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 取回远程仓库的变化，并与本地分支合并</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git pull [remote] [branch]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 上传本地指定分支到远程仓库</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git push [remote] [branch]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 强行推送当前分支到远程仓库，即使有冲突</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git push [remote] --force</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 推送所有分支到远程仓库</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git push [remote] --all</span></span><br></pre></td></tr></table></figure>

<h2 id="九、撤销"><a href="#九、撤销" class="headerlink" title="九、撤销"></a>九、撤销</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 恢复暂存区的指定文件到工作区</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git checkout [file]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 恢复某个commit的指定文件到暂存区和工作区</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git checkout [commit] [file]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 恢复暂存区的所有文件到工作区</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git checkout .</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 重置暂存区的指定文件，与上一次commit保持一致，但工作区不变</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git reset [file]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 重置暂存区与工作区，与上一次commit保持一致</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git reset --hard</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 重置当前分支的指针为指定commit，同时重置暂存区，但工作区不变</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git reset [commit]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 重置当前分支的HEAD为指定commit，同时重置暂存区和工作区，与指定commit一致</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git reset --hard [commit]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 重置当前HEAD为指定commit，但保持暂存区和工作区不变</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git reset --keep [commit]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 新建一个commit，用来撤销指定commit</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 后者的所有变化都将被前者抵消，并且应用到当前分支</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git revert [commit]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 暂时将未提交的变化移除，稍后再移入</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git stash</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git stash pop</span></span><br></pre></td></tr></table></figure>

<h2 id="十、其他"><a href="#十、其他" class="headerlink" title="十、其他"></a>十、其他</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 生成一个可供发布的压缩包</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git archive</span></span><br></pre></td></tr></table></figure>

<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><blockquote>
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cucnVhbnlpZmVuZy5jb20vYmxvZy8yMDE1LzEyL2dpdC1jaGVhdC1zaGVldC5odG1s" title="https://www.ruanyifeng.com/blog/2015/12/git-cheat-sheet.html">常用 Git 命令清单<i class="fa fa-external-link"></i></span></p>
<p><span class="exturl" data-url="aHR0cHM6Ly9teS5vc2NoaW5hLm5ldC94ZGV2L2Jsb2cvMTE0Mzgz" title="https://my.oschina.net/xdev/blog/114383">图解Git[强烈推荐]<i class="fa fa-external-link"></i></span></p>
<p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YzcxNGQxOGYyNjVkYTJkOTgwOTA1MDM=" title="https://juejin.im/post/5c714d18f265da2d98090503">图解git原理与日常实用指南<i class="fa fa-external-link"></i></span></p>
</blockquote>

      
    </div>

    

    
    
    

    <footer class="post-footer">
      

      <div>    
        
        
            <ul class="post-copyright">
            <li class="post-copyright-author">
                <strong>本文作者：</strong>Mr.Miaow
            </li>
            <li class="post-copyright-link">
                <strong>本文链接：</strong>
                <a href="/2020/08/29/Git/GitNote/" title="Git note">2020/08/29/Git/GitNote/</a>
            </li>
            <li class="post-copyright-license">
                <strong>版权： </strong>
                本站文章均采用 <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn/" rel="external nofollow noopener noreferrer" target="_blank">CC BY-NC-SA 3.0 CN</a> 许可协议，请勿用于商业，转载注明出处！
            </li>
            </ul>
        
      </div>
    
      

      
        
      
      
        <div>
          <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div></div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>打赏</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
      	<a href="/images/wechatpay.jpg" class="fancybox fancybox.image" rel="group">
          <img id="wechat_qr" src="/images/wechatpay.jpg" alt="Mr.Miaow 微信支付">
	</a>
        <p>微信支付</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
      	<a href="/images/alipay.jpg" class="fancybox fancybox.image" rel="group">
          <img id="alipay_qr" src="/images/alipay.jpg" alt="Mr.Miaow 支付宝">
	</a>
        <p>支付宝</p>
      </div>
    

    

  </div>
</div>

        </div>
      

      
        <div class="post-tags">
          
            <a href="/tags/Git/" rel="tag"> <i class="fa fa-tag"></i> Git</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2020/06/17/Other/优秀的Blog链接/" rel="next" title="优秀的Blog链接">
                <i class="fa fa-chevron-left"></i> 优秀的Blog链接
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2020/09/20/Vim/VimNote/" rel="prev" title="Vim note">
                Vim note <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  
    <div class="comments" id="gitalk-container">
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">
      
      
        
            <ul class="sidebar-nav motion-element">
                <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
                    文章目录
                </li>
                <li class="sidebar-nav-overview" data-target="site-overview-wrap">
                    站点概览
                </li>
            </ul>
        
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <!-- 添加头像链接 -->
            <a href="/about">
              
                <img class="site-author-image" itemprop="image" src="http://wx4.sinaimg.cn/orj360/e9d04169ly1fde7jy4bquj20ek0hf7gh.jpg" alt="Mr.Miaow">
              
                <p class="site-author-name" itemprop="name">Mr.Miaow</p>
            </a>
              <div class="site-description motion-element" itemprop="description"></div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">81</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">24</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">29</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL21pYW9wZWk=" title="GitHub &rarr; https://github.com/miaopei"><i class="fa fa-fw fa-github"></i>GitHub</span>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="/miaopei163@163.com" title="E-Mail &rarr; miaopei163@163.com"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            </div>
          

          <link rel="stylesheet" href="/dist/APlayer.min.css">
          <div id="aplayer"></div>
          <script type="text/javascript" src="/dist/APlayer.min.js"></script>
          <script type="text/javascript" src="/dist/music.js"></script>

          

          
          

          
            
          
          

        </div>
      </div>

      
        
        <!--noindex-->
            <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
                <div class="post-toc">

                
                    
                

                
                    <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Git-原理和常用命令"><span class="nav-number">1.</span> <span class="nav-text">Git 原理和常用命令</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#5-Git-workflows-you-can-use-to-deliver-better-code-and-improve-your-development-process"><span class="nav-number">1.1.</span> <span class="nav-text">5 Git workflows you can use to deliver better code and improve your development process</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-Basic-Git-Workflow"><span class="nav-number">1.1.1.</span> <span class="nav-text">1. Basic Git Workflow</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-Git-Feature-Branch-Workflow"><span class="nav-number">1.1.2.</span> <span class="nav-text">2. Git Feature Branch Workflow</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-Git-Feature-Workflow-with-Develop-Branch"><span class="nav-number">1.1.3.</span> <span class="nav-text">3. Git Feature Workflow with Develop Branch</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-Gitflow-Workflow"><span class="nav-number">1.1.4.</span> <span class="nav-text">4. Gitflow Workflow</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-Git-Fork-Workflow"><span class="nav-number">1.1.5.</span> <span class="nav-text">5. Git Fork Workflow</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Git-基础和原理"><span class="nav-number">1.2.</span> <span class="nav-text">Git 基础和原理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#直接记录快照，而非差异比较"><span class="nav-number">1.2.1.</span> <span class="nav-text">直接记录快照，而非差异比较</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#近乎所有操作都是本地执行"><span class="nav-number">1.2.2.</span> <span class="nav-text">近乎所有操作都是本地执行</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Git-保证完整性"><span class="nav-number">1.2.3.</span> <span class="nav-text">Git 保证完整性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Git一般只添加数据"><span class="nav-number">1.2.4.</span> <span class="nav-text">Git一般只添加数据</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Git-的工作流程"><span class="nav-number">1.3.</span> <span class="nav-text">Git 的工作流程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#先来了解4个专有名词"><span class="nav-number">1.3.1.</span> <span class="nav-text">先来了解4个专有名词</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#常用的Git命令详解"><span class="nav-number">1.4.</span> <span class="nav-text">常用的Git命令详解</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#HEAD"><span class="nav-number">1.4.1.</span> <span class="nav-text">HEAD</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#git-add"><span class="nav-number">1.4.2.</span> <span class="nav-text">git add</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#git-commit"><span class="nav-number">1.4.3.</span> <span class="nav-text">git commit</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#git-branch"><span class="nav-number">1.4.4.</span> <span class="nav-text">git branch</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#git-merge"><span class="nav-number">1.4.5.</span> <span class="nav-text">git merge</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#git-rebase"><span class="nav-number">1.4.6.</span> <span class="nav-text">git rebase</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#git-reset"><span class="nav-number">1.4.7.</span> <span class="nav-text">git reset</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#git-revert"><span class="nav-number">1.4.8.</span> <span class="nav-text">git revert</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#git-push"><span class="nav-number">1.4.9.</span> <span class="nav-text">git push</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#git-fetch"><span class="nav-number">1.4.10.</span> <span class="nav-text">git fetch</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#git-pull"><span class="nav-number">1.4.11.</span> <span class="nav-text">git pull</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#一些命令的区别"><span class="nav-number">1.5.</span> <span class="nav-text">一些命令的区别</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#merge-和-rebase"><span class="nav-number">1.5.1.</span> <span class="nav-text">merge 和 rebase</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#reset-和-revert"><span class="nav-number">1.5.2.</span> <span class="nav-text">reset 和 revert</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#fetch-和-pull"><span class="nav-number">1.5.3.</span> <span class="nav-text">fetch 和 pull</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#图解Git-强烈推荐"><span class="nav-number">2.</span> <span class="nav-text">图解Git[强烈推荐]</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#基本用法"><span class="nav-number">2.1.</span> <span class="nav-text">基本用法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#约定"><span class="nav-number">2.2.</span> <span class="nav-text">约定</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#命令详解"><span class="nav-number">2.3.</span> <span class="nav-text">命令详解</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Diff"><span class="nav-number">2.3.1.</span> <span class="nav-text">Diff</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Commit"><span class="nav-number">2.3.2.</span> <span class="nav-text">Commit</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Checkout"><span class="nav-number">2.3.3.</span> <span class="nav-text">Checkout</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#用分离HEAD提交-找不到好的译法"><span class="nav-number">2.3.4.</span> <span class="nav-text">用分离HEAD提交(找不到好的译法)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Reset"><span class="nav-number">2.3.5.</span> <span class="nav-text">Reset</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Merge"><span class="nav-number">2.3.6.</span> <span class="nav-text">Merge</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Cherry-Pick"><span class="nav-number">2.3.7.</span> <span class="nav-text">Cherry Pick</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Rebase"><span class="nav-number">2.3.8.</span> <span class="nav-text">Rebase</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#图解Git原理与日常实用指南"><span class="nav-number">3.</span> <span class="nav-text">图解Git原理与日常实用指南</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Feature-Branching：最流行的工作流"><span class="nav-number">3.1.</span> <span class="nav-text">Feature Branching：最流行的工作流</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#HEAD、branch、引用的本质以及-push-的本质"><span class="nav-number">3.2.</span> <span class="nav-text">HEAD、branch、引用的本质以及 push 的本质</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#HEAD：当前commit的引用"><span class="nav-number">3.2.1.</span> <span class="nav-text">HEAD：当前commit的引用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#branch："><span class="nav-number">3.2.2.</span> <span class="nav-text">branch：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#引用的本质"><span class="nav-number">3.2.3.</span> <span class="nav-text">引用的本质</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#push的本质：把-branch-上传到远程仓库"><span class="nav-number">3.2.4.</span> <span class="nav-text">push的本质：把 branch 上传到远程仓库</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#开启git操作之旅"><span class="nav-number">3.3.</span> <span class="nav-text">开启git操作之旅</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#merge：合并"><span class="nav-number">3.3.1.</span> <span class="nav-text">merge：合并</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#rebase：给commit序列重新设置基础点"><span class="nav-number">3.3.2.</span> <span class="nav-text">rebase：给commit序列重新设置基础点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#stash：临时存放工作目录的改动"><span class="nav-number">3.3.3.</span> <span class="nav-text">stash：临时存放工作目录的改动</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#reflog：引用记录的log"><span class="nav-number">3.3.4.</span> <span class="nav-text">reflog：引用记录的log</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#看看我都改了什么"><span class="nav-number">3.3.5.</span> <span class="nav-text">看看我都改了什么</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#刚刚提交的代码发现写错了怎么办？"><span class="nav-number">3.3.6.</span> <span class="nav-text">刚刚提交的代码发现写错了怎么办？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#错误不是最新的提交而是倒数第二个？"><span class="nav-number">3.3.7.</span> <span class="nav-text">错误不是最新的提交而是倒数第二个？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#想直接丢弃某次提交？"><span class="nav-number">3.3.8.</span> <span class="nav-text">想直接丢弃某次提交？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#错误代码已经push？"><span class="nav-number">3.3.9.</span> <span class="nav-text">错误代码已经push？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#reset：不止可以撤销提交"><span class="nav-number">3.3.10.</span> <span class="nav-text">reset：不止可以撤销提交</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#checkout：签出指定commit"><span class="nav-number">3.3.11.</span> <span class="nav-text">checkout：签出指定commit</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#常用-Git-命令清单"><span class="nav-number">4.</span> <span class="nav-text">常用 Git 命令清单</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#一、新建代码库"><span class="nav-number">4.1.</span> <span class="nav-text">一、新建代码库</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#二、配置"><span class="nav-number">4.2.</span> <span class="nav-text">二、配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#三、增加-删除文件"><span class="nav-number">4.3.</span> <span class="nav-text">三、增加/删除文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#四、代码提交"><span class="nav-number">4.4.</span> <span class="nav-text">四、代码提交</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#五、分支"><span class="nav-number">4.5.</span> <span class="nav-text">五、分支</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#六、标签"><span class="nav-number">4.6.</span> <span class="nav-text">六、标签</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#七、查看信息"><span class="nav-number">4.7.</span> <span class="nav-text">七、查看信息</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#八、远程同步"><span class="nav-number">4.8.</span> <span class="nav-text">八、远程同步</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#九、撤销"><span class="nav-number">4.9.</span> <span class="nav-text">九、撤销</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#十、其他"><span class="nav-number">4.10.</span> <span class="nav-text">十、其他</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Reference"><span class="nav-number">5.</span> <span class="nav-text">Reference</span></a></li></ol></div>
                

                </div>
            </div>
        <!--/noindex-->
        
      


      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<div class="copyright">&copy; 2015 – <span itemprop="copyrightYear">2020</span>
  <span class="with-love" id="animate">
    <!--<i class="fa fa-user"></i>-->
    <i class="fa fa-heart" aria-hidden="true" style="color:red"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Mr.Miaow</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
    <span title="站点总字数">4.3m</span>
  

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    
    <span title="站点阅读时长">65:42</span>
  

</div>


   <div>
   <span id="sitetime"></span>
   <span id="year" style="display:none">2016</span> 
   <span id="month" style="display:none">12</span>   
   <span id="day" style="display:none">23</span>   
   <span id="hour" style="display:none">15</span>   
   <span id="minute" style="display:none">0</span>   
   <span id="second" style="display:none">0</span>   
	<script language="javascript">
	function siteTime(){        
		window.setTimeout("siteTime()", 1000);
		var seconds = 1000;
		var minutes = seconds * 60;
		var hours = minutes * 60;
		var days = hours * 24;
		var years = days * 365;
		var today = new Date();
		var todayYear = today.getFullYear();
		var todayMonth = today.getMonth()+1;
		var todayDate = today.getDate();
		var todayHour = today.getHours();
		var todayMinute = today.getMinutes();
		var todaySecond = today.getSeconds();
		/* Date.UTC() -- 返回date对象距世界标准时间(UTC)1970年1月1日午夜之间的毫秒数(时间戳)
		year - 作为date对象的年份，为4位年份值
		month - 0-11之间的整数，做为date对象的月份
		day - 1-31之间的整数，做为date对象的天数
		hours - 0(午夜24点)-23之间的整数，做为date对象的小时数
		minutes - 0-59之间的整数，做为date对象的分钟数
		seconds - 0-59之间的整数，做为date对象的秒数
		microseconds - 0-999之间的整数，做为date对象的毫秒数 */        
		var year = document.getElementById("year").innerHTML;
		var month = document.getElementById("month").innerHTML;
		var day = document.getElementById("day").innerHTML;
		var hour = document.getElementById("hour").innerHTML;
		var minute = document.getElementById("minute").innerHTML;
		var second = document.getElementById("second").innerHTML;//北京时间2018-2-13 00:00:00
		var t1 = Date.UTC(year,month,day,hour,minute,second); 
		var t2 = Date.UTC(todayYear,todayMonth,todayDate,todayHour,todayMinute,todaySecond);
		var diff = t2-t1;
		var diffYears = Math.floor(diff/years);
		var diffDays = Math.floor((diff/days)-diffYears*365);
		var diffHours = Math.floor((diff-(diffYears*365+diffDays)*days)/hours);
		var diffMinutes = Math.floor((diff-(diffYears*365+diffDays)*days-diffHours*hours)/minutes);
		var diffSeconds = Math.floor((diff-(diffYears*365+diffDays)*days-diffHours*hours-diffMinutes*minutes)/seconds);
		if(diffYears==0){
		document.getElementById("sitetime").innerHTML=" 网站已运行 "/*+diffYears+" 年 "*/+diffDays+" 天 "+diffHours+" 小时 "+diffMinutes+" 分钟 "+diffSeconds+" 秒";
		} else{
		document.getElementById("sitetime").innerHTML=" 网站已运行 "+diffYears+" 年 "+diffDays+" 天 "+diffHours+" 小时 "+diffMinutes+" 分钟 "+diffSeconds+" 秒";
		}
	}
	//siteTime(document.getElementById("year").innerHTML,document.getElementById("year").innerHTML,document.getElementById("year").innerHTML,document.getElementById("year").innerHTML,document.getElementById("year").innerHTML,0);
	siteTime();
	</script>
</div>



<div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
  本站访客数:<span id="busuanzi_value_site_uv"></span>
</span>
</div>

<!--









-->

        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>





  



  






  



  
    
    
  
  <script color="0,0,255" opacity="0.5" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest.min.js"></script>











  



  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script src="/lib/fancybox/source/jquery.fancybox.pack.js"></script>

  
  <script src="/lib/reading_progress/reading_progress.js"></script>


  


  <script src="/js/utils.js?v=7.1.1"></script>

  <script src="/js/motion.js?v=7.1.1"></script>


  
  
  


  <script src="/js/affix.js?v=7.1.1"></script>

  <script src="/js/schemes/pisces.js?v=7.1.1"></script>




  
  <script src="/js/scrollspy.js?v=7.1.1"></script>
<script src="/js/post-details.js?v=7.1.1"></script>



  


  <script src="/js/next-boot.js?v=7.1.1"></script>


  

  
  <script src="/js/exturl.js?v=7.1.1"></script>


  
  
  
    
  

  

  
  
  


  


  
    

<script src="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>



<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css">



<script src="//cdn.jsdelivr.net/npm/js-md5@0.7.3/src/md5.min.js"></script>

<script>
  var gitalk = new Gitalk({
    clientID: '8c7770a2f56149bd67f7',
    clientSecret: '1f8bcd6210eaf36b727bcf0546a16cb68dc9012a',
    repo: 'gitment-comments',
    owner: 'miaopei',
    admin: ['miaopei'],
    id: md5(location.pathname),
    
      language: 'zh-CN',
    
    distractionFreeMode: 'true'
  });
  gitalk.render('gitalk-container');
</script>

  


  
  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url).replace(/\/{2,}/g, '/');
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x"></i></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  
  

  
  

  
    
      <script type="text/x-mathjax-config">
  

  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$', '$'], ['\\(', '\\)'] ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      
      equationNumbers: {
        autoNumber: 'AMS'
      }
    }
  });
  MathJax.Hub.Register.StartupHook('TeX Jax Ready', function() {
    MathJax.InputJax.TeX.prefilterHooks.Add(function(data) {
      if (data.display) {
        var next = data.script.nextSibling;
        while (next && next.nodeName.toLowerCase() === '#text') { next = next.nextSibling }
        if (next && next.nodeName.toLowerCase() === 'br') { next.parentNode.removeChild(next) }
      }
    });
  });
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for (i = 0; i < all.length; i += 1) {
      document.getElementById(all[i].inputID + '-Frame').parentNode.className += ' has-jax';
    }
  });
</script>
<script src="//cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

    
  


  
<script>
if ($('body').find('div.pdf').length) {
  $.ajax({
    type: 'GET',
    url: '//cdn.jsdelivr.net/npm/pdfobject@2.1.1/pdfobject.min.js',
    dataType: 'script',
    cache: true,
    success: function() {
      $('body').find('div.pdf').each(function(i, o) {
        PDFObject.embed($(o).attr('target'), $(o), {
          pdfOpenParams: {
            navpanes: 0,
            toolbar: 0,
            statusbar: 0,
            pagemode: 'thumbs',
            view: 'FitH'
          },
          PDFJS_URL: '/lib/pdf/web/viewer.html',
          height: $(o).attr('height') || '500px'
        });
      });
    },
  });
}
</script>


  
<script>
if ($('body').find('pre.mermaid').length) {
  $.ajax({
    type: 'GET',
    url: '//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js',
    dataType: 'script',
    cache: true,
    success: function() {
      mermaid.initialize({
        theme: 'forest',
        logLevel: 3,
        flowchart: { curve: 'linear' },
        gantt: { axisFormat: '%m/%d/%Y' },
        sequence: { actorMargin: 50 }
      });
    }
  });
}
</script>


  
  <script>
    (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      bp.src = (curProtocol === 'https') ? 'https://zz.bdstatic.com/linksubmit/push.js' : 'http://push.zhanzhang.baidu.com/push.js';
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>


  

  

  

  
  
  
  <script src="/lib/pangu/dist/pangu.min.js?v=3.3"></script>
  <script>pangu.spacingPage();</script>


  

  
<script>
  $('.highlight').not('.gist .highlight').each(function(i, e) {
    var $wrap = $('<div>').addClass('highlight-wrap');
    $(e).after($wrap);
    $wrap.append($('<button>').addClass('copy-btn').append('复制').on('click', function(e) {
      var code = $(this).parent().find('.code').find('.line').map(function(i, e) {
        return $(e).text();
      }).toArray().join('\n');
      var ta = document.createElement('textarea');
      var yPosition = window.pageYOffset || document.documentElement.scrollTop;
      ta.style.top = yPosition + 'px'; // Prevent page scroll
      ta.style.position = 'absolute';
      ta.style.opacity = '0';
      ta.readOnly = true;
      ta.value = code;
      document.body.appendChild(ta);
      ta.select();
      ta.setSelectionRange(0, code.length);
      ta.readOnly = false;
      var result = document.execCommand('copy');
      
        if (result) $(this).text('复制成功');
        else $(this).text('复制失败');
      
      ta.blur(); // For iOS
      $(this).blur();
    })).on('mouseleave', function(e) {
      var $b = $(this).find('.copy-btn');
      setTimeout(function() {
        $b.text('复制');
      }, 300);
    }).append(e);
  })
</script>


  

  

  
  
    

    
    <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
    <script>AV.initialize("8my53W9pnVTOdpPvvH1P76YB-gzGzoHsz", "DxtWRruxKOO4SPacKO9Mxe8g");</script>
    <script>
        function showTime(Counter) {
            var query = new AV.Query(Counter);
            var entries = [];
            var $visitors = $(".leancloud_visitors");

            $visitors.each(function () {
                entries.push( $(this).attr("id").trim()  );
            });

            query.containedIn('url', entries);
            query.find()
                .done(function (results) {
                    var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

                    if (results.length === 0) {
                        $visitors.find(COUNT_CONTAINER_REF).text(0);
                        return;
                    }

                    for (var i = 0; i < results.length; i++) {
                        var item = results[i];
                        var url = item.get('url');
                        var time = item.get('time');
                        var element = document.getElementById(url);

                        $(element).find(COUNT_CONTAINER_REF).text(time);

                    }
                    for(var i = 0; i < entries.length; i++) {
                        var url = entries[i];
                        var element = document.getElementById(url);
                        var countSpan = $(element).find(COUNT_CONTAINER_REF);
                        if( countSpan.text() == '' ) {
                            countSpan.text(0);
                        }
                    }

                })
                .fail(function (object, error) {
                    console.log("Error: " + error.code + " " + error.message);
                });
        }

        function addCount(Counter) {
            var $visitors = $(".leancloud_visitors");
            var url = $visitors.attr('id').trim();
            var title = $visitors.attr('data-flag-title').trim();
            var query = new AV.Query(Counter);

            query.equalTo("url", url);
            query.find({
                success: function(results) {
                    if (results.length > 0) {
                        var counter = results[0];
                        counter.fetchWhenSave(true);
                        counter.increment("time");
                        counter.save(null, {
                            success: function(counter) {
                                var $element = $(document.getElementById(url));
                                $element.find('.leancloud-visitors-count').text(counter.get('time'));
                            },
                            error: function(counter, error) {
                                console.log('Failed to save Visitor num, with error message: ' + error.message);
                            }
                        });
                    } else {
                        var newcounter = new Counter();
                        /* Set ACL */
                        var acl = new AV.ACL();
                        acl.setPublicReadAccess(true);
                        acl.setPublicWriteAccess(true);
                        newcounter.setACL(acl);
                        /* End Set ACL */
                        newcounter.set("title", title);
                        newcounter.set("url", url);
                        newcounter.set("time", 1);
                        newcounter.save(null, {
                            success: function(newcounter) {
                                var $element = $(document.getElementById(url));
                                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
                            },
                            error: function(newcounter, error) {
                                console.log('Failed to create');
                            }
                        });
                    }
                },
                error: function(error) {
                    console.log('Error:' + error.code + " " + error.message);
                }
            });
        }

        $(function() {
            var Counter = AV.Object.extend("Counter");
            if ($('.leancloud_visitors').length == 1) {
                addCount(Counter);
            } else if ($('.post-title-link').length > 1) {
                showTime(Counter);
            }
        });
    </script>



  

  <!-- 页面点击小红心 -->
  <script type="text/javascript" src="/js/src/love.js"></script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config("");
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src>
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
</body>
</html>
